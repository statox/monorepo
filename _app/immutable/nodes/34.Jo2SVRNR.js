import"../chunks/DsnmJJEf.js";import"../chunks/ctDXYmCv.js";import{p as x,h as s,F as A,d as M,g as t,b as U,s as l,f as L,i as o,a as T}from"../chunks/eXUqL77E.js";import{i as $}from"../chunks/UpJSkP_W.js";import{g as C}from"../chunks/KrFvZVf3.js";import"../chunks/BwMIEaHE.js";import{p as D}from"../chunks/B4-ntoLf.js";/* empty css                */import"../chunks/B0neLVfT.js";import{r as d}from"../chunks/CujdopWx.js";import{b as m}from"../chunks/CEUJmi10.js";import{F as P,a as R,c as B,s as E,h as G}from"../chunks/s9sbZi-t.js";import{u as H}from"../chunks/Cah4tkCb.js";var I=U('<label for="artist">Artist</label> <input type="text"/> <label for="title">Title</label> <input type="text"/> <label for="url">URL</label> <input type="text"/> <label for="tags">Tags</label> <input type="text"/> <!>',1);function N(f,i){x(i,!0);let r=s(""),n=s(""),p=s(""),u=s(""),c=s(!1),a=s(A([]));const S=async()=>{if(o(a,[],!0),t(r)||t(a).push({level:"error",header:"Title must be defined"}),t(n)||t(a).push({level:"error",header:"Artist must be defined"}),t(p)||t(a).push({level:"error",header:"URL must be defined"}),t(a).length)return;const g=t(u)?t(u).replaceAll(" ","").split(","):[],w={title:t(r),artist:t(n),url:t(p),tags:g,creationDate:Date.now()};try{o(c,!0),await H(w),E("Song added successfully"),i.onUpload()}catch(h){G(h)}finally{o(c,!1)}};P(f,{title:"Add a new song",backUrl:"/songbook/edit",authMessage:"Login to add a new song",get noticeMessages(){return t(a)},children:(g,w)=>{R(g,{children:(h,j)=>{var F=I(),b=l(L(F),2);d(b);var v=l(b,4);d(v);var y=l(v,4);d(y);var _=l(y,4);d(_);var k=l(_,2);B(k,{onclick:S,get loading(){return t(c)}}),m(b,()=>t(n),e=>o(n,e)),m(v,()=>t(r),e=>o(r,e)),m(y,()=>t(p),e=>o(p,e)),m(_,()=>t(u),e=>o(u,e)),T(h,F)}})},$$slots:{default:!0}}),M()}function ot(f,i){x(i,!1);const r={name:"Songbook",description:"My collection of chords",showAuthInHeader:!0};D.set(r),$(),N(f,{onUpload:()=>C("/songbook/edit")}),M()}export{ot as component};
