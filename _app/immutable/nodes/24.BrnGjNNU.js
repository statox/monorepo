import"../chunks/DsnmJJEf.js";import{a as ke}from"../chunks/vjUZdrab.js";import{h as A,g as H,i as J,a1 as pe,p as Ce,F as ue,b as X,e as u,s as a,t as Ee,a as P,d as Fe,r as d,f as Ge}from"../chunks/eXUqL77E.js";import{d as Le,s as Pe}from"../chunks/BemXrffE.js";import{i as W}from"../chunks/CTMdkGpN.js";import{s as ee,r as M,c as de}from"../chunks/CujdopWx.js";import{b as z}from"../chunks/CEUJmi10.js";import{M as Xe}from"../chunks/Cjw1GVnL.js";import{P as Ye}from"../chunks/Bsmh5y_W.js";class Ze{default;#e=A();get value(){return H(this.#e)}set value(o){J(this.#e,o,!0)}key="";constructor(o,n){this.key=o,this.value=n,this.default=n;{const r=localStorage.getItem(o);r&&(this.value=this.deserialize(r))}pe(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(o){return JSON.stringify(o)}deserialize(o){return JSON.parse(o)}}function f(l,o){return new Ze(l,o)}const Re=(l,o,n)=>o-n<=l&&l<=o+n;function qe(l,o){const n=Math.sqrt(l*l+o*o),r=Math.atan2(o,l);return{r:n,theta:r}}const Ne=(l,o)=>{const{gridSize:n,colorMode:r,cellSize:N,t:Y,noiseMode:x,noiseFactor:Z,displacementX:h,displacementY:B,displacementZ:L,levelsStart:w,levelsEnd:k,levelsStep:D,levelsMargin:I}=o;l.background(0);const R=l.color(255,0,0),q=l.color(0,255,0);for(let g=0;g<n;g++)for(let S=0;S<n;S++){let _=0;if(x==="carthesian")_=l.noise(S*Z+Y*h,g*Z+Y*B,Y*L);else if(x==="polar"){const{r:m,theta:p}=qe((S-n/2)*Z,(g-n/2)*Z);_=l.noise(p*h,m*B,Y*L)}for(let m=w;m<=k;m+=D||.1){if(!Re(_,m,I))continue;let p=255;if(r==="white")p=255;else if(r==="gradient")p=l.map(m,w,k,100,255);else if(r==="quantized-gradient"){const V=Math.trunc(_*10)/10;p=l.map(V,w,k,100,255)}else if(r==="color-gradient")p=l.lerpColor(R,q,_);else if(r==="color-scaled-gradient"){const V=l.map(_,w,k,0,1);p=l.lerpColor(R,q,V)}l.fill(p),l.circle(S*N,g*N,N)}}};var xe=X("<br/>"),Be=X('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1"/>',1),De=X('<div class="control-section svelte-1a6vy18"><label for="gridSize">Grid size</label> <input type="number" step="1"/> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),Ie=X("<br/>"),Ve=X('<div class="control-section svelte-1a6vy18"><label for="noiseMode">Noise Mode</label> <select id="noiseMode-select"><option>Carthesian</option><option>Polar</option></select> <label for="displacementX">displacementX</label> <input type="number" step="0.01"/> <label for="displacementY">displacementY</label> <input type="number" step="0.01"/> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"/> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"/></div>'),We=X("<br/>"),Ae=X('<div class="control-section svelte-1a6vy18"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"/> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"/> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"/> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"/> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),He=X('<div class="container svelte-1a6vy18"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-1a6vy18"><span class="control-header svelte-1a6vy18"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-1a6vy18"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-1a6vy18"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-1a6vy18"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function aa(l,o){Ce(o,!0);let n=A(void 0),r=1e3,N=0,Y=0,x=0,Z=A(0);const h=f("p5-terrain-gridSize",200);let B=r/h.value;pe(()=>{B=r/h.value});let L=f("p5-terrain-blurEnabled",!1),w=f("p5-terrain-blurValue",4),k=f("p5-terrain-displacementX",0),D=f("p5-terrain-displacementY",0),I=f("p5-terrain-displacementZ",.01),R=f("p5-terrain-noiseFactor",.02),q=f("p5-terrain-levelsStart",.2),g=f("p5-terrain-levelsEnd",.8),S=f("p5-terrain-levelsStep",.05),_=f("p5-terrain-margin",.005),m=f("p5-terrain-colorMode","gradient"),p=f("p5-terrain-nodeMode","carthesian"),V=A(ue(L.value?"on":"off"));const fe=()=>{[h,L,w,p,k,D,I,R,q,g,S,_,m].forEach(t=>t.reset())},b=ue({grid:!1,noise:!1,lines:!1}),be=e=>{function t(){const i=Math.min(e.windowWidth,e.windowHeight);r=Math.floor(i*.9),e.resizeCanvas(r,r),B=r/h.value}function c(){const i=Date.now();i-Y>1e3&&(J(Z,x,!0),Y=i,x=0),x++}e.windowResized=()=>{t()},e.setup=()=>{J(n,e,!0),e.createCanvas(r,r),t(),e.noStroke()},e.draw=()=>{c(),N++,Ne(e,{gridSize:h.value,colorMode:m.value,noiseMode:p.value,t:N,cellSize:B,noiseFactor:R.value,displacementX:k.value,displacementY:D.value,displacementZ:I.value,levelsStart:q.value,levelsEnd:g.value,levelsMargin:_.value,levelsStep:S.value}),L.value&&e.filter(e.BLUR,w.value)}};ke(()=>{H(n)?.remove()});var O=He(),T=u(O),Q=u(T),ae=a(u(Q),2),_e=u(ae,!0);d(ae),d(Q);var me=a(Q,2);Ye(me,{sketch:be}),d(T);var le=a(T,2),U=u(le),te=u(U);te.__click=()=>b.grid=!b.grid,d(U);var oe=a(U,2);{var he=e=>{var t=xe();P(e,t)},ge=e=>{var t=De(),c=a(u(t),2);M(c);var i=a(c,4);Xe(i,{get value(){return H(V)},label:"",onchange:s=>{J(V,s,!0),L.value=s==="on"},design:"slider"});var C=a(i,2);{var E=s=>{var y=Be(),F=a(Ge(y),2);M(F),z(F,()=>w.value,v=>w.value=v),P(s,y)};W(C,s=>{L.value&&s(E)})}d(t),z(c,()=>h.value,s=>h.value=s),P(e,t)};W(oe,e=>{b.grid?e(he):e(ge,!1)})}var j=a(oe,2),re=u(j);re.__click=()=>b.noise=!b.noise,d(j);var se=a(j,2);{var Se=e=>{var t=Ie();P(e,t)},ye=e=>{var t=Ve(),c=a(u(t),2),i=u(c);i.value=i.__value="carthesian";var C=a(i);C.value=C.__value="polar",d(c);var E=a(c,4);M(E);var s=a(E,4);M(s);var y=a(s,4);M(y);var F=a(y,4);M(F),d(t),de(c,()=>p.value,v=>p.value=v),z(E,()=>k.value,v=>k.value=v),z(s,()=>D.value,v=>D.value=v),z(y,()=>I.value,v=>I.value=v),z(F,()=>R.value,v=>R.value=v),P(e,t)};W(se,e=>{b.noise?e(Se):e(ye,!1)})}var K=a(se,2),ne=u(K);ne.__click=()=>b.lines=!b.lines,d(K);var ie=a(K,2);{var Me=e=>{var t=We();P(e,t)},ze=e=>{var t=Ae(),c=a(u(t),2);M(c);var i=a(c,4);M(i);var C=a(i,4);M(C);var E=a(C,4);M(E);var s=a(E,4),y=u(s);y.value=y.__value="white";var F=a(y);F.value=F.__value="gradient";var v=a(F);v.value=v.__value="quantized-gradient";var $=a(v);$.value=$.__value="color-gradient";var ce=a($);ce.value=ce.__value="color-scaled-gradient",d(s),d(t),z(c,()=>q.value,G=>q.value=G),z(i,()=>g.value,G=>g.value=G),z(C,()=>S.value,G=>S.value=G),z(E,()=>_.value,G=>_.value=G),de(s,()=>m.value,G=>m.value=G),P(e,t)};W(ie,e=>{b.lines?e(Me):e(ze,!1)})}var ve=a(ie,2),we=a(u(ve));we.__click=fe,d(ve),d(le),d(O),Ee(()=>{Pe(_e,H(Z)),ee(te,1,`collapse-button ${b.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1a6vy18"),ee(re,1,`collapse-button ${b.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1a6vy18"),ee(ne,1,`collapse-button ${b.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1a6vy18")}),P(l,O),Fe()}Le(["click"]);export{aa as component};
