import"../chunks/DsnmJJEf.js";import"../chunks/ctDXYmCv.js";import{p as G,b as N,e as n,s as d,r as o,t as F,a as w,d as H,g as m,aI as K,f as U,D as k}from"../chunks/eXUqL77E.js";import{a as J}from"../chunks/DyzBQ-gh.js";import{i as Y}from"../chunks/UpJSkP_W.js";import{A as i,g as Z}from"../chunks/B6HXUbiD.js";import{a as T,D as x}from"../chunks/CkcISRbr.js";import{M as $}from"../chunks/utk3oDie.js";import"../chunks/C0_mIZkl.js";import{p as aa}from"../chunks/B4-ntoLf.js";import{M as C}from"../chunks/71ylWyng.js";import"../chunks/B0neLVfT.js";import{s as g}from"../chunks/BemXrffE.js";import{a as I,s as ta}from"../chunks/CujdopWx.js";import{i as ea}from"../chunks/CTMdkGpN.js";import{e as D,i as j}from"../chunks/D9zXBg3D.js";const z=a=>{if(a===i.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(a===i.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(a===i.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(a===i.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(a===i.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(a===i.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(a===i.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(a===i.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},na=a=>{if(a===i.NEW)return"moon_phase_icons/1_new_moon.png";if(a===i.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(a===i.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(a===i.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(a===i.FULL)return"moon_phase_icons/5_full_moon.png";if(a===i.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(a===i.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(a===i.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},oa=async()=>{const{ephemerides:a}=await Z(),{moonState:t,sunState:e,upcomingLunarStates:l}=a;return{moonState:t,sunState:{goldenHour:x.fromMillis(e.goldenHour),solarNoon:x.fromMillis(e.solarNoon),sunrise:x.fromMillis(e.sunrise),sunset:x.fromMillis(e.sunset),dayLength:T.fromMillis(e.dayLengthMs),dayLengthDiff:T.fromMillis(e.dayLengthDiffMs)},upcomingLunarStates:l.map(_=>({date:x.fromMillis(_.tsMillis),lunarState:{..._.lunarState,phasePictureUrl:z(_.lunarState.moonPhase)}}))}};var ra=N('<div class="container svelte-1al6uzi"><div class="content svelte-1al6uzi"><div class="data svelte-1al6uzi"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-1al6uzi"/></div></div>');function ia(a,t){G(t,!0);var e=ra(),l=n(e),_=n(l),p=d(n(_),6),S=n(p,!0);o(p);var s=d(p,4),u=n(s);o(s);var r=d(s,4),h=n(r);o(r);var v=d(r,8),M=n(v);o(v);var c=d(v,4),E=n(c);o(c);var L=d(c,4),f=n(L,!0);o(L);var A=d(L,4),b=n(A,!0);o(A),o(_);var P=d(_,2);o(l),o(e),F((y,R,W,B,O,q,Q,X,V)=>{g(S,t.moonState.moonPhaseFr),g(u,`${y??""} days (${R??""}%)`),g(h,`${t.moonState.moonVisibilityWindow[0]??""} - ${t.moonState.moonVisibilityWindow[1]??""}`),g(M,`${W??""} - ${B??""}`),g(E,`${O??""}
                (${t.sunState.dayLengthDiff>0?"+":""}${q??""})`),g(f,Q),g(b,X),I(P,"alt",t.moonState.moonPhase),I(P,"src",V)},[()=>t.moonState.lunarAge.toFixed(1),()=>(t.moonState.lunarAgePercent*100).toFixed(0),()=>t.sunState.sunrise.toFormat("HH:mm"),()=>t.sunState.sunset.toFormat("HH:mm"),()=>t.sunState.dayLength.toFormat("h:m"),()=>t.sunState.dayLengthDiff.toFormat("m:s"),()=>t.sunState.solarNoon.toFormat("HH:mm"),()=>t.sunState.goldenHour.toFormat("HH:mm"),()=>z(t.moonState.moonPhase)]),w(a,e),H()}var sa=N('<div class="day-header svelte-1x8ozl7"> </div>'),ma=N("<div> </div> <div> </div>",1),da=N('<div><div><img class="phase-img svelte-1x8ozl7"/></div> <!></div>'),ua=N('<div class="container svelte-1x8ozl7"><!> <!></div>');function _a(a,t){G(t,!0);var e=ua(),l=n(e);D(l,17,()=>t.upcomingLunarStates.slice(0,7),j,(p,S)=>{let s=()=>m(S).date;var u=sa(),r=n(u,!0);o(u),F(h=>g(r,h),[()=>s().setLocale("fr").toLocaleString({weekday:"long"})]),w(p,u)});var _=d(l,2);D(_,17,()=>t.upcomingLunarStates,j,(p,S,s)=>{let u=()=>m(S).date,r=()=>m(S).lunarState;const h=K(()=>s===0||s===29||t.upcomingLunarStates[s-1].lunarState.moonPhaseFr!==r().moonPhaseFr);var v=da(),M=n(v),c=n(M);o(M);var E=d(M,2);{var L=f=>{var A=ma(),b=U(A),P=n(b,!0);o(b);var y=d(b,2),R=n(y,!0);o(y),F(W=>{g(P,W),g(R,r().moonPhaseFr)},[()=>u().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})]),w(f,A)};ea(E,f=>{m(h)&&f(L)})}o(v),F(f=>{ta(v,1,`entry ${m(h)?"important-day":"other-day"}`,"svelte-1x8ozl7"),I(c,"alt",r().moonPhase),I(c,"src",f)},[()=>na(r().moonPhase)]),w(p,v)}),o(e),w(a,e),H()}var la=N('<!> <div class="separator svelte-19j52u8"></div> <!> <div class="separator svelte-19j52u8"></div> <!>',1),pa=N("<p>Loading ephemerides data</p>"),va=N('<!> <div class="content"><!></div>',1);function Fa(a,t){G(t,!1);const e={name:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"};aa.set(e),Y();var l=va(),_=U(l);$(_,{get title(){return e.name},get description(){return e.description},get iconPath(){return e.iconPath}});var p=d(_,2),S=n(p);J(S,oa,s=>{var u=pa();w(s,u)},(s,u)=>{var r=k(()=>{var{moonState:A,sunState:b,upcomingLunarStates:P}=m(u);return{moonState:A,sunState:b,upcomingLunarStates:P}}),h=k(()=>m(r).moonState),v=k(()=>m(r).sunState),M=k(()=>m(r).upcomingLunarStates),c=la(),E=U(c);ia(E,{get moonState(){return m(h)},get sunState(){return m(v)}});var L=d(E,4);_a(L,{get upcomingLunarStates(){return m(M)}});var f=d(L,4);C(f,{item:{level:"info",message:"All data is computed for Paris, France"}}),w(s,c)},(s,u)=>{{let r=k(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:m(u)}));C(s,{get item(){return m(r)}})}}),o(p),w(a,l),H()}export{Fa as component};
