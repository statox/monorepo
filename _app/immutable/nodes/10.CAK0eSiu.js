import"../chunks/DsnmJJEf.js";import{a as U}from"../chunks/vjUZdrab.js";import{b as X,a as Y,p as N,f as J,i as A,e as T,g as v,s as C,d as K,h as O,r as E,U as z}from"../chunks/eXUqL77E.js";import{d as q}from"../chunks/BemXrffE.js";import{P as Q}from"../chunks/Bsmh5y_W.js";import"../chunks/ctDXYmCv.js";import"../chunks/Dx65nAjy.js";import{p as Z}from"../chunks/B4-ntoLf.js";/* empty css                */import"../chunks/B0neLVfT.js";var tt=X(`<div class="contents"><div>This page is an implementation of <a href="https://chordwheel.com/" target="_blank" rel="noopener noreferrer">Jim Fleser's Chord Wheel</a> it is intended for my personal use. If you are using this implementation you should consider <a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=4" target="_blank" rel="noopener noreferrer">buying his book</a> or <a href="https://apps.apple.com/us/app/the-chord-wheel/id444931977" target="_blank" rel="noopener noreferrer">his app</a> (which is much more complete than this page).</div> <div>This tool only works for songs in major keys. <ul><li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=5&amp;Itemid=17" target="_blank" rel="noopener noreferrer">Analyzing songs and compositional styles</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=8:soloing-and-improvisation&amp;catid=8:using-the-chordwheel&amp;Itemid=8" target="_blank" rel="noopener noreferrer">Soloing and improvisation</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=9&amp;Itemid=5" target="_blank" rel="noopener noreferrer">Transpositions</a></li></ul></div></div>`);function et(t){var e=tt();Y(t,e)}const B=Math.PI,V={scale:1,position:0,outerRing:{labels:["B°","F♯°","C♯°","G♯°","D♯°","A♯°","F°","C°","G°","D°","A°","E°"],cellSize:2*B/48,ratio:4,innerDiameter:.82,outerDiameter:1},middleRing:{labels:["Em","Am","Bm","Em","F♯m","Bm","C♯m","F♯m","G♯m","C♯m","D♯m","G♯m","A♯m","E♭m","Fm","B♭m","Cm","Fm","Gm","Cm","Dm","Gm","Am","Dm"],cellSize:2*B/24,ratio:1,innerDiameter:.6,outerDiameter:.82},innerRing:{labels:["C","G","D","A","F♭/E","C♭/B","G♭/F♯","D♭/C♯","A♭/G♯","E♭","B♭","F"],cellSize:2*B/12,ratio:1,innerDiameter:.35,outerDiameter:.6}},W=(t,e)=>{if(t>=0)return t%e;for(;t<0;)t+=e;return t},L=(t,e,o,n,i,s,c)=>{const d=2*(e*(i-c)+n*(c-o)+s*(o-i)),l=((e*e+o*o)*(i-c)+(n*n+i*i)*(c-o)+(s*s+c*c)*(o-i))/d,a=((e*e+o*o)*(s-n)+(n*n+i*i)*(e-s)+(s*s+c*c)*(n-e))/d,h=t.dist(l,a,e,o),m=t.atan2(o-a,e-l),g=t.atan2(c-a,s-l),k=I=>{let f=I;for(;f>t.PI;)f-=t.TWO_PI;for(;f<-t.PI;)f+=t.TWO_PI;return f},b=m,x=g,y=5;let R=b;const p=k(x-b)/y;for(let I=1;I<=y;I++){R+=p;const f=l+h*t.cos(R),r=a+h*t.sin(R);t.vertex(f,r)}},G=(t,e,o,n,i,s)=>{if(o<0||o>=e.labels.length)throw new Error(`OOB labelIndex: ${o}`);const{cellSize:c,innerDiameter:d,outerDiameter:l,ratio:a}=e,h=t.createVector();h.x=0,h.y=-l/2;const m=o*c*a+t.map(s,0,1,0,Math.PI/6);h.rotate(m);const g=c/2,k=[h.copy().rotate(-g).setMag(d),h.copy().rotate(-g).setMag(l),h.copy().setMag(l),h.copy().rotate(g).setMag(l),h.copy().rotate(g).setMag(d),h.copy().setMag(d)].map(y=>y.mult(i)),b=h.copy().setMag(d+(l-d)/2).mult(i),x=W(o+n,e.labels.length)*360/e.labels.length;return{vertices:k,center:b,label:e.labels[o],color:`hsb(${x}, 50%, 80%)`,colorHue:x}},H=(t,e,o)=>{const{scale:n}=e,i=e.innerRing.labels.map((d,l)=>G(t,e.innerRing,l,e.position,n,o)),s=e.middleRing.labels.map((d,l)=>G(t,e.middleRing,l,e.position*2,n,o)),c=e.outerRing.labels.map((d,l)=>G(t,e.outerRing,l,e.position,n,o));return{tilesInnerRing:i,tilesMiddleRing:s,tilesOuterRing:c}},F=(t,e,o)=>{o?(t.strokeWeight(3),t.stroke([0,0,0,1]),t.fill(`hsb(${e.colorHue}, 60%, 90%)`)):(t.strokeWeight(2),t.stroke([0,0,0,.5]),t.fill(`hsb(${e.colorHue}, 50%, 70%)`));const[n,i,s,c,d,l]=e.vertices;t.beginShape(),t.vertex(n.x,n.y),t.vertex(i.x,i.y),L(t,i.x,i.y,s.x,s.y,c.x,c.y),t.vertex(d.x,d.y),L(t,d.x,d.y,l.x,l.y,n.x,n.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),o?(t.textStyle(t.BOLD),t.text(e.label,e.center.x-t.textWidth(e.label)/2,e.center.y),t.textStyle(t.NORMAL)):t.text(e.label,e.center.x-t.textWidth(e.label)/2,e.center.y)},ot=(t,e,o,n,i)=>{const s=[o[W(e-1,o.length)],o[W(e,o.length)],o[W(e+1,o.length)],n[W(2*e-1,n.length)],n[W(2*e,n.length)],n[W(2*e+1,n.length)],i[W(e,i.length)]];for(const c of s)F(t,c,!0)},nt=(t,e,o)=>{const{scale:n}=o;t.textSize(10),t.push(),t.rotate(e*(2*t.PI/12)),t.fill(250),t.circle(0,0,o.innerRing.innerDiameter*2*n),t.fill(0);const i=t.createVector();i.x=0,i.y=-o.innerRing.innerDiameter*n;const s="▲";t.text(s,i.x-t.textWidth(s)/2,i.y*.9);const c="Key";t.text(c,i.x-t.textWidth(c)/2,i.y*.75);const d=t.createVector(),l=["♯","♯♯","♯♯♯","♯♯♯♯","7♭/5♯","6♭/6♯","5♭/7♯","♭♭♭♭","♭♭♭","♭♭","♭"];d.y=-o.innerRing.innerDiameter*.85*n,t.push();for(const u of l)t.rotate(2*t.PI/12),t.text(u,-t.textWidth(u)/2,d.y);t.pop();const a=t.createVector();a.y=-o.innerRing.innerDiameter*1.04*n;const h="I";t.text(h,a.x-t.textWidth(h)/2,a.y);const m=t.createVector();m.y=-o.innerRing.outerDiameter*.9*n;const g="maj7,maj9";t.text(g,m.x-t.textWidth(g)/2,m.y),t.push(),t.rotate(-(2*t.PI)/12);const k="IV";t.text(k,a.x-t.textWidth(k)/2,a.y);const b="maj7,maj9";t.text(b,m.x-t.textWidth(b)/2,m.y),t.pop(),t.push(),t.rotate(2*t.PI/12);const x="V";t.text(x,a.x-t.textWidth(x)/2,a.y);const y="7,9,11,sus4,13";t.text(y,m.x-t.textWidth(y)/2,m.y),t.pop(),a.y=-o.middleRing.innerDiameter*1.02*n,m.y=-o.middleRing.outerDiameter*.95*n;const R="III";t.text(R,a.x-t.textWidth(R)/2,a.y);const w="m7";t.text(w,m.x-t.textWidth(w)/2,m.y),t.push(),t.rotate(-(2*t.PI)/24);const p="II";t.text(p,a.x-t.textWidth(p)/2,a.y);const I="m7,m9";t.text(I,m.x-t.textWidth(I)/2,m.y),t.pop(),t.push();const f="V I";t.rotate(2*t.PI/24),t.text(f,a.x-t.textWidth(f)/2,a.y);const r="m7,m9";t.text(r,m.x-t.textWidth(r)/2,m.y),t.pop();const P="V II°";a.y=-o.outerRing.innerDiameter*1.015*n,m.y=-o.outerRing.outerDiameter*.96*n,t.text(P,a.x-t.textWidth(P)/2,a.y);const _="m7♭5";t.text(_,m.x-t.textWidth(_)/2,m.y)},rt=(t,e)=>{if(e){t.position--,t.innerRing.labels.unshift(t.innerRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.outerRing.labels.unshift(t.outerRing.labels.pop());return}t.position++,t.innerRing.labels.push(t.innerRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.outerRing.labels.push(t.outerRing.labels.shift())};var it=X(`<div class="d-flex justify-content-center svelte-laba2m"><!></div> <div class="justify-content-center svelte-laba2m"><p><button aria-label="rotate shape counter clockwise" class="fa fa-undo"></button> Shape rotation <button aria-label="rotate shape clockwise" class="fa fa-repeat"></button></p> <p><button aria-label="rotate wheel counter clockwise" class="fa fa-undo"></button> Wheel rotation <button aria-label="rotate wheel clockwise" class="fa fa-repeat"></button></p> <p>On mobile swipe left/right to rotate the shape and up/down to rotate the wheel. On the
        browser you can drag the mouse left/right and up/down.</p> <!></div>`,1);function xt(t,e){N(e,!0),Z.set({name:"Chord Wheel",description:"Find chords in a scale",iconPath:"/chord_wheel.png"});let o,n,i=O(0),s=O(0),c=O(void 0);const d=r=>{v(c)||A(c,setInterval(()=>{if(v(s)>=1||v(s)<=-1){rt(V,r),A(s,0),clearInterval(v(c)),A(c,void 0);return}A(s,v(s)+(r?.05:-.05))},1),!0)},l=()=>{d(!0)},a=()=>{d(!1)},h=r=>{function P(){const u=Math.max(Math.min(r.windowWidth,r.windowHeight),560);r.resizeCanvas(u*.8,u*.8),V.scale=u/2*.75,n=H(r,V,0)}r.setup=()=>{o=r,r.createCanvas(100,100),P(),r.colorMode(r.HSB)},r.draw=()=>{n=H(o,V,v(s)),r.translate(r.width/2,r.height/2);const u=getComputedStyle(document.body),S=u.getPropertyValue("--nc-bg-1"),M=u.getPropertyValue("--nc-bg-2");r.background(S),r.fill(M),r.circle(0,0,r.width),n.tilesInnerRing.forEach(D=>F(r,D)),n.tilesMiddleRing.forEach(D=>F(r,D)),n.tilesOuterRing.forEach(D=>F(r,D)),ot(r,v(i),n.tilesInnerRing,n.tilesMiddleRing,n.tilesOuterRing),nt(r,v(i),V)},r.keyPressed=u=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(r.key)&&(u.preventDefault(),r.key==="ArrowLeft"&&z(i,-1),r.key==="ArrowRight"&&z(i),r.key==="ArrowUp"&&a(),r.key==="ArrowDown"&&l())};let _;r.mouseDragged=u=>{if(u.target?.className!=="p5Canvas")return;if(u.preventDefault(),!_){_={x:r.mouseX,y:r.mouseY};return}const S=r.mouseX-_.x,M=r.mouseY-_.y,D=Math.abs(S),j=Math.abs(M);D<50&&j<50||(D>j?S<0?z(i,-1):z(i):M>0?l():a(),_={x:r.mouseX,y:r.mouseY})},r.windowResized=()=>{P()}};U(()=>{o?.remove()});var m=it(),g=J(m),k=T(g);Q(k,{sketch:h}),E(g);var b=C(g,2),x=T(b),y=T(x);y.__click=()=>A(i,v(i)-1);var R=C(y,2);R.__click=()=>A(i,v(i)+1),E(x);var w=C(x,2),p=T(w);p.__click=a;var I=C(p,2);I.__click=l,E(w);var f=C(w,4);et(f),E(b),Y(t,m),K()}q(["click"]);export{xt as component};
