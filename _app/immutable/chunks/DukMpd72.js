import"./DsnmJJEf.js";import{p as N,b as O,t as I,a as d,d as V,a$ as j,g as s,aI as P,r as C,h as q,i as v,c as z,f as G,e as R}from"./eXUqL77E.js";import{d as H,e as M}from"./BemXrffE.js";import{e as x,i as D}from"./D9zXBg3D.js";import{b as W,a as J,s as E}from"./CujdopWx.js";var Q=(n=>(n[n.notOver=0]="notOver",n[n.winPlayer1=1]="winPlayer1",n[n.winPlayer2=2]="winPlayer2",n[n.draw=3]="draw",n))(Q||{});const y=7,w=6,o=4;class T extends Error{constructor(e){super("Can't play in column "+e)}}const le=()=>Array.from({length:y},()=>[]),se=n=>n.map(e=>[...e]),U=(n,e)=>n[e].length!==w,re=n=>{const e=[];for(let l=0;l<n.length;l++)n[l].length<w&&e.push(l);return e},X=n=>{const e=y*w,l=n.reduce((i,r)=>i+r.length,0);return e===l},Y=n=>{for(let e=0;e<y;e++)for(let l=0;l<w;l++){if(n[e].length<l||!n[e][l])continue;const i=n[e][l];let r=0,f=0,h=0,a=0;for(let t=0;t<o;t++)l+t<=n[e].length&&n[e][l+t]===i&&r++,e+t<n.length&&n[e+t][l]===i&&f++,e+t<n.length&&l+t<=n[e+t].length&&n[e+t][l+t]===i&&h++,e+t<n.length&&l-t>=0&&n[e+t][l-t]===i&&a++;if(r===o||f===o||h===o||a===o)return i}return null},ie=n=>{if(Z(n)===0)return null;for(let e=0;e<y;e++)for(let l=0;l<w;l++){if(n[e].length<l||!n[e][l])continue;const i=n[e][l],r=[],f=[],h=[],a=[];for(let t=0;t<o;t++)l+t<=n[e].length&&n[e][l+t]===i&&r.push([l+t,e]),e+t<n.length&&n[e+t][l]===i&&f.push([l,e+t]),e+t<n.length&&l+t<=n[e+t].length&&n[e+t][l+t]===i&&h.push([l+t,e+t]),e+t<n.length&&l-t>=0&&n[e+t][l-t]===i&&a.push([l-t,e+t]);if(r.length===o)return r;if(f.length===o)return f;if(h.length===o)return h;if(a.length===o)return a}return null},Z=n=>{if(X(n))return 3;const e=Y(n);return e===1?1:e===2?2:0},ue=(n,e,l)=>{if(!U(n,l))throw new T(l);return n[l].push(e),n};var p=O('<div class="svelte-8y92u7"><button><div></div></button></div>'),B=O('<div class="board svelte-8y92u7"></div>');function ae(n,e){N(e,!0);const l=P(()=>Array.from({length:e.nbRows},(t,u)=>u)),i=P(()=>Array.from({length:e.nbColumns},(t,u)=>u));let r=q(null);const f=(t,u)=>e.winningCells===null?!1:e.winningCells.filter(m=>m[0]===t&&m[1]===u).length>0,h=t=>{switch(t.key){case"ArrowRight":if(t.preventDefault(),s(r)===null){v(r,Math.floor(e.nbColumns/2),!0);return}v(r,Math.min(s(r)+1,e.nbColumns-1),!0);break;case"ArrowLeft":if(t.preventDefault(),s(r)===null){v(r,Math.floor(e.nbColumns/2),!0);return}v(r,Math.max(s(r)-1,0),!0);break;case" ":if(t.preventDefault(),s(r)===null)return;e.onMove(s(r));break}};var a=B();M("keydown",j,h),x(a,21,()=>s(l).reverse(),D,(t,u)=>{var m=z(),F=G(m);x(F,17,()=>s(i),D,(K,c)=>{var _=p(),g=R(_);let k;g.__click=()=>e.onMove(s(c));var b=R(g);let A;C(g),C(_),I(L=>{J(g,"aria-label","col-"+s(c)),k=E(g,1,"outer-cell svelte-8y92u7",null,k,L),A=E(b,1,"cell svelte-8y92u7",null,A,{player1:e.board[s(c)][s(u)]===1,player2:e.board[s(c)][s(u)]===2,drop:e.board[s(c)][s(u)]&&s(u)===e.board[s(c)].length-1}),W(b,`--drop-distance: ${e.nbRows-s(u)};`)},[()=>({selected:s(r)===s(c),"winning-cell":f(s(u),s(c))})]),M("mouseenter",g,()=>v(r,s(c),!0)),M("mouseleave",g,()=>v(r,null)),d(K,_)}),d(t,m)}),C(a),I(()=>W(a,`--nb-col: ${e.nbColumns??""}; --nb-row: ${e.nbRows??""}`)),d(n,a),V()}H(["click"]);export{Q as B,ae as a,Z as b,se as c,le as d,y as e,ie as f,re as g,U as i,ue as m,w as n};
