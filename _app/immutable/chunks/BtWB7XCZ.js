import"./DsnmJJEf.js";import{o as Q,a as U}from"./vjUZdrab.js";import{t as S,l as x,m as D,G as V,bx as W,aa as M,a8 as X,a9 as $,bm as ee,bj as te,a_ as I,u as se,aZ as re,a7 as T,p as ne,h as A,F as ie,a1 as R,i as v,g as d,b as q,e as C,r as N,s as P,a as z,d as ae}from"./eXUqL77E.js";import{w as G,d as oe,e as B}from"./BemXrffE.js";import{i as fe}from"./CTMdkGpN.js";import{s as ue,e as le}from"./CujdopWx.js";import{b as ce,a as de,s as me}from"./y59AJ40k.js";function _e(t,e,i=!1,f=!1,c=!1){var r=t,a="";S(()=>{var n=V;if(a===(a=e()??"")){x&&D();return}if(n.nodes!==null&&(W(n.nodes.start,n.nodes.end),n.nodes=null),a!==""){if(x){M.data;for(var s=D(),u=s;s!==null&&(s.nodeType!==X||s.data!=="");)u=s,s=$(s);if(s===null)throw ee(),te;I(M,u),r=se(s);return}var l=a+"";i?l=`<svg>${l}</svg>`:f&&(l=`<math>${l}</math>`);var o=re(l);if((i||f)&&(o=T(o)),I(T(o),o.lastChild),i||f)for(;T(o);)r.before(T(o));else r.before(o)}})}const he=()=>performance.now(),_={tick:t=>requestAnimationFrame(t),now:()=>he(),tasks:new Set};function H(){const t=_.now();_.tasks.forEach(e=>{e.c(t)||(_.tasks.delete(e),e.f())}),_.tasks.size!==0&&_.tick(H)}function pe(t){let e;return _.tasks.size===0&&_.tick(H),{promise:new Promise(i=>{_.tasks.add(e={c:t,f:i})}),abort(){_.tasks.delete(e)}}}function K(t){return t}function De(t){const e=t-1;return e*e*e+1}const ve={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function ge(){const{subscribe:t,update:e}=G([]),i={};let f=0;function c(n="default",s={}){return i[n]=s,i}function r(n,s){const u={target:"default",msg:n,...s},l=i[u.target]||{},o={...ve,...l,...u,theme:{...l.theme,...u.theme},classes:[...l.classes||[],...u.classes||[]],id:++f};return e(g=>o.reversed?[...g,o]:[o,...g]),f}function a(n){e(s=>{if(!s.length||n===0)return[];if(n===void 0){const u=Math.max(...s.map(l=>l.id));return s.filter(l=>l.id!==u)}return typeof n=="number"?s.filter(u=>u.id!==n):s.filter(u=>u.target!==n.target)})}return{subscribe:t,push:r,pop:a,_init:c}}const be=ge();function F(t){return Object.prototype.toString.call(t)==="[object Date]"}function O(t,e){if(t===e||t!==t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const f=e.map((c,r)=>O(t[r],c));return c=>f.map(r=>r(c))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(F(t)&&F(e)){const r=t.getTime(),n=e.getTime()-r;return s=>new Date(r+s*n)}const f=Object.keys(e),c={};return f.forEach(r=>{c[r]=O(t[r],e[r])}),r=>{const a={};return f.forEach(n=>{a[n]=c[n](r)}),a}}if(i==="number"){const f=e-t;return c=>t+c*f}return()=>e}function L(t,e={}){const i=G(t);let f,c=t;function r(a,n){if(c=a,t==null)return i.set(t=a),Promise.resolve();let s=f,u=!1,{delay:l=0,duration:o=400,easing:g=K,interpolate:k=O}={...e,...n};if(o===0)return s&&(s.abort(),s=null),i.set(t=c),Promise.resolve();const E=_.now()+l;let h;return f=pe(y=>{if(y<E)return!0;u||(h=k(t,a),typeof o=="function"&&(o=o(t,a)),u=!0),s&&(s.abort(),s=null);const b=y-E;return b>o?(i.set(t=a),!1):(i.set(t=h(g(b/o))),!0)}),f.promise}return{set:r,update:(a,n)=>r(a(c,t),n),subscribe:i.subscribe}}var ye=q('<div class="_toastBtn pe svelte-536hrw" role="button" tabindex="0"></div>'),we=q('<div role="status"><div class="_toastMsg svelte-536hrw"><!></div> <!> <progress class="_toastBar svelte-536hrw"></progress></div>');function Me(t,e){ne(e,!0);const i=()=>de(d(n),"$progress",f),[f,c]=me();let r=A(void 0),a=A(void 0),n=A(ie(L(0))),s=A(!1),u;R(()=>{v(r,e.item.initial,!0),v(a,e.item.initial,!0),ce(v(n,L(e.item.initial??0,{duration:e.item.duration??0,easing:K}),!0),"$progress",f)});function l(){be.pop(e.item.id)}function o(){(i()===1||i()===0)&&l()}function g(){!d(s)&&i()!==d(r)&&(d(n).set(i(),{duration:0}),v(s,!0))}function k(){if(d(s)){const m=e.item.duration;if(m!==void 0&&d(a)!==void 0&&d(r)!==void 0){const p=m-m*((i()-d(a))/(d(r)-d(a)));d(n).set(d(r),{duration:p}).then(o)}v(s,!1)}}function E(m=document){if(m.hidden===void 0)return;const p=()=>m.hidden?g():k(),w="visibilitychange";m.addEventListener(w,p),u=()=>m.removeEventListener(w,p),p()}R(()=>{if(d(r)!==e.item.next){if(v(r,e.item.next,!0),v(a,i(),!0),v(s,!1),d(r)===void 0)throw Error("Toast with undefined next");d(n).set(d(r)).then(o)}}),Q(E),U(()=>{e.item?.onpop&&e.item.onpop(e.item.id),u?.()});var h=we();let y;var b=C(h),Y=C(b);_e(Y,()=>e.item.msg),N(b);var j=P(b,2);{var Z=m=>{var p=ye();p.__click=l,p.__keydown=w=>{w instanceof KeyboardEvent&&["Enter"," "].includes(w.key)&&l()},z(m,p)};fe(j,m=>{e.item.dismissable&&m(Z)})}var J=P(j,2);N(h),S(()=>{y=ue(h,1,"_toastItem svelte-536hrw",null,y,{pe:e.item.pausable}),le(J,i())}),B("mouseenter",h,()=>{e.item.pausable&&g()}),B("mouseleave",h,k),z(t,h),ae(),c()}oe(["click","keydown"]);export{Me as T,De as c,_e as h,pe as l,be as t};
