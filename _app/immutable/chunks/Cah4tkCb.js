import{c as e,A as d,d as u}from"./B0neLVfT.js";import"./DsnmJJEf.js";import{t as o}from"./BtWB7XCZ.js";const g=r=>{const t=r.url;return t.includes(".doc")?"doc":t.includes(".pdf")?"pdf":t.includes("youtube")?"youtube":"link"},n=e.chords.getAll,f=async()=>(await n()).map(t=>({...t,type:g(t)})),L=e.chords.getLinksVisitsCount,b=e.chords.checkLinks,l=e.chords.updateAll,w=e.chords.addLinkVisit,p={type:"object",required:["artist","title","url","creationDate","tags"],additionalProperties:!1,properties:{artist:{type:"string",minLength:1},title:{type:"string",minLength:1},url:{type:"string",minLength:1},creationDate:{type:"number"},tags:{type:"array",items:{type:"string"}}}},i=new d,a=i.compile(p);function h(r){if(!a(r)){const t=i.errorsText(a.errors);throw new Error(`Invalid PersonalTracker data: ${t}`)}}const C=async r=>{try{h(r)}catch(t){const s=`<strong>Validation Error</strong><br/> ${t.message}`;throw o.push(s,{theme:{"--toastBarBackground":"#FF0000"}}),t}try{const t=await n(),s=[r,...t];await l({chords:s})}catch(t){let s=t.message;t instanceof u&&t.code===401&&(s="Invalid logged in user");const c=`<strong>Entry not created</strong><br/> ${s}`;o.push(c,{theme:{"--toastBarBackground":"#FF0000"}})}};export{w as a,b,L as c,n as d,l as e,f as g,C as u};
